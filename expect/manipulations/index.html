<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.98.0"><meta name=description content="This is a java library that tries to parse and analyze the useragent string (and when available the User-Agent Client Hints) and extract as many relevant attributes as possible."><meta name=author content="Niels Basjes"><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=manifest href=/favicon/manifest.json><link rel=mask-icon href=/favicon/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#2d89ef"><meta name=msapplication-TileImage content="/favicon/mstile-144x144.png"><meta name=theme-color content="#ffffff"><title>Manipulations | Yauaa - Yet Another UserAgent Analyzer</title><link href=/css/nucleus.css?1652013445 rel=stylesheet><link href=/css/fontawesome-all.min.css?1652013445 rel=stylesheet><link href=/css/hybrid.css?1652013445 rel=stylesheet><link href=/css/featherlight.min.css?1652013445 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1652013445 rel=stylesheet><link href=/css/auto-complete.css?1652013445 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1652013445 rel=stylesheet><link href=/css/theme.css?1652013445 rel=stylesheet><link href=/css/tabs.css?1652013445 rel=stylesheet><link href=/css/hugo-theme.css?1652013445 rel=stylesheet><link href=/css/theme-yauaa.css?1652013445 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1652013445></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><script type=text/javascript>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){t="https://wa.basjes.nl/",_paq.push(["setTrackerUrl",t+"wa.php"]),_paq.push(["setSiteId","1"]);var t,n=document,e=n.createElement("script"),s=n.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src=t+"wa.js",s.parentNode.insertBefore(e,s)}()</script></head><body data-url=/expect/manipulations/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><p class=logo-bar>Yauaa</p></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1652013445></script>
<script type=text/javascript src=/js/auto-complete.js?1652013445></script>
<script type=text/javascript>var baseurl="/"</script><script type=text/javascript src=/js/search.js?1652013445></script></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i> Yauaa</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/expect/ title="What to expect" class="dd-item
parent"><a href=/expect/>What to expect</a><ul><li data-nav-id=/expect/fieldvalues/ title="Field values" class=dd-item><a href=/expect/fieldvalues/>Field values</a></li><li data-nav-id=/expect/performance/ title=Performance class=dd-item><a href=/expect/performance/>Performance</a></li><li data-nav-id=/expect/limitations/ title=Limitations class=dd-item><a href=/expect/limitations/>Limitations</a></li><li data-nav-id=/expect/manipulations/ title=Manipulations class="dd-item active"><a href=/expect/manipulations/>Manipulations</a></li><li data-nav-id=/expect/tryit/ title="Try it!" class=dd-item><a href=/expect/tryit/>Try it!</a></li></ul></li><li data-nav-id=/using/ title="Using the analyzer" class=dd-item><a href=/using/>Using Yauaa</a><ul><li data-nav-id=/using/clienthints/ title="User-Agent Client Hints" class=dd-item><a href=/using/clienthints/>User-Agent Client Hints</a></li><li data-nav-id=/using/memoryusage/ title="Memory usage" class=dd-item><a href=/using/memoryusage/>Memory usage</a></li><li data-nav-id=/using/webservlet/ title="The demonstration webservlet" class=dd-item><a href=/using/webservlet/>Webservlet</a></li><li data-nav-id=/using/kubernetes/ title=Kubernetes class=dd-item><a href=/using/kubernetes/>Kubernetes</a></li><li data-nav-id=/using/license/ title=Licence class=dd-item><a href=/using/license/>Licence</a></li></ul></li><li data-nav-id=/udf/ title="User Defined Functions" class=dd-item><a href=/udf/>User Defined Functions</a><ul><li data-nav-id=/udf/apache-beam/ title="Apache Beam" class=dd-item><a href=/udf/apache-beam/>Apache Beam</a></li><li data-nav-id=/udf/apache-beam-sql/ title="Apache Beam SQL" class=dd-item><a href=/udf/apache-beam-sql/>Apache Beam SQL</a></li><li data-nav-id=/udf/apache-drill/ title="Apache Drill" class=dd-item><a href=/udf/apache-drill/>Apache Drill</a></li><li data-nav-id=/udf/apache-flink/ title="Apache Flink" class=dd-item><a href=/udf/apache-flink/>Apache Flink</a></li><li data-nav-id=/udf/apache-flink-table/ title="Apache Flink Table/SQL" class=dd-item><a href=/udf/apache-flink-table/>Apache Flink Table/SQL</a></li><li data-nav-id=/udf/apache-hive/ title="Apache Hive" class=dd-item><a href=/udf/apache-hive/>Apache Hive</a></li><li data-nav-id=/udf/apache-nifi/ title="Apache Nifi" class=dd-item><a href=/udf/apache-nifi/>Apache Nifi</a></li><li data-nav-id=/udf/apache-pig/ title="Apache Pig" class=dd-item><a href=/udf/apache-pig/>Apache Pig</a></li><li data-nav-id=/udf/commandline/ title="Commandline usage" class=dd-item><a href=/udf/commandline/>Commandline usage</a></li><li data-nav-id=/udf/elastic-logstash/ title="Elastic LogStash" class=dd-item><a href=/udf/elastic-logstash/>Elastic LogStash</a></li><li data-nav-id=/udf/elastic-search/ title="Elastic Search" class=dd-item><a href=/udf/elastic-search/>Elastic Search</a></li><li data-nav-id=/udf/logparser/ title=LogParser class=dd-item><a href=/udf/logparser/>LogParser</a></li><li data-nav-id=/udf/snowflake/ title=Snowflake class=dd-item><a href=/udf/snowflake/>Snowflake</a></li><li data-nav-id=/udf/snowplow/ title=Snowplow class=dd-item><a href=/udf/snowplow/>Snowplow</a></li><li data-nav-id=/udf/trino/ title=Trino class=dd-item><a href=/udf/trino/>Trino</a></li></ul></li><li data-nav-id=/developer/ title=Development class=dd-item><a href=/developer/>Development</a><ul><li data-nav-id=/developer/building/ title="Building from source" class=dd-item><a href=/developer/building/>Building from source</a></li><li data-nav-id=/developer/basedesign/ title="Base Design" class=dd-item><a href=/developer/basedesign/>Base Design</a></li><li data-nav-id=/developer/makingnewrules/ title="Making new rules" class=dd-item><a href=/developer/makingnewrules/>Making new rules</a></li><li data-nav-id=/developer/shadingdependencies/ title="Shading dependencies" class=dd-item><a href=/developer/shadingdependencies/>Shading dependencies</a></li></ul></li><li data-nav-id=/other/ title=Other class=dd-item><a href=/other/>Other</a><ul><li data-nav-id=/other/article/ title=Blogpost class=dd-item><a href=/other/article/>Blogpost</a></li><li data-nav-id=/other/relatedprojects/ title="Related projects" class=dd-item><a href=/other/relatedprojects/>Related projects</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/nielsbasjes/yauaa><i class="fab fa-git-square"></i> Git repo</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/discussions><i class="fa fa-comment-alt"></i> Discussions</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/blob/main/CHANGELOG.md><i class="fa fa-file-alt"></i> Changelog</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/issues><i class="fa fa-bug"></i> Issue tracker</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/actions><img alt="Github actions Build status" src=https://img.shields.io/github/workflow/status/nielsbasjes/yauaa/Yauaa></a></li><li><a class=padding href=https://app.codecov.io/gh/nielsbasjes/yauaa><img alt="Coverage Status" src=https://img.shields.io/codecov/c/github/nielsbasjes/yauaa></a></li><li><a class=padding href=https://www.apache.org/licenses/LICENSE-2.0.html><img alt=License src=https://img.shields.io/:license-apache-blue.svg></a></li><li><a class=padding href=https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22nl.basjes.parse.useragent%22><img alt="Maven Central" src=https://img.shields.io/maven-central/v/nl.basjes.parse.useragent/yauaa-parent.svg></a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/stargazers><img alt="GitHub stars" src="https://img.shields.io/github/stars/nielsbasjes/yauaa?label=GitHub%20stars"></a></li><li><a class=padding href=https://hub.docker.com/r/nielsbasjes/yauaa><img alt="Docker Hub" src=https://img.shields.io/docker/pulls/nielsbasjes/yauaa></a></li><li><a class=padding href=https://www.paypal.me/nielsbasjes><img alt="If this project has business value for you then dont hesitate to support me with a small donation." src=https://img.shields.io/badge/Donations-via%20Paypal-blue.svg></a></li></ul></section><section id=footer><p>&copy;2013-2022 by <a href=https://niels.basjes.nl>Niels Basjes</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/nielsbasjes/yauaa/tree/main/documentation/content/expect/Manipulations.md target=blank><i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Yauaa: Yet Another UserAgent Analyzer</a> > <a href=/expect/>What to expect</a> > Manipulations</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#privacy>Privacy</a><ul><li><a href=#reducingfreezing-the-useragent>Reducing/Freezing the UserAgent</a></li></ul></li><li><a href=#compatibility>Compatibility</a><ul><li><a href=#there-is-no-macos-11>There is no MacOS 11</a></li><li><a href=#there-is-no-windows-11-in-chromiumchromeedge>There is no Windows 11 in Chromium/Chrome/Edge/&mldr;</a></li><li><a href=#there-is-no-windows-11-in-firefox>There is no Windows 11 in Firefox</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Manipulations</h1><h2 id=privacy>Privacy</h2><p>Useragents have had a lot of information about the device and the browser in it. This has been so detailled in the past that there were many situations where the useragents could be used for tracking visitors very reliably.</p><h3 id=reducingfreezing-the-useragent>Reducing/Freezing the UserAgent</h3><p>So a few years ago in several browsers projects started to reduce the level of information in the UserAgent. As a direct consequence the analysis results will become less usefull over time as browsers will start taking away more and more information.</p><ul><li><a href=https://www.chromium.org/updates/ua-reduction>https://www.chromium.org/updates/ua-reduction</a></li><li><a href=https://www.chromestatus.com/feature/5704553745874944>https://www.chromestatus.com/feature/5704553745874944</a></li></ul><p>The (Q1 2022) DRAFT proposal of the User-Agent Client Hints is intended to contain the information needed in a cleaner way.</p><ul><li><a href=https://wicg.github.io/ua-client-hints/>https://wicg.github.io/ua-client-hints/</a></li><li><a href=https://github.com/WICG/ua-client-hints>https://github.com/WICG/ua-client-hints</a></li></ul><p>At this point in time (Q1 2022):</p><ul><li>This is not a standard yet</li><li>Not all browsers support this<ul><li>Chromium based browsers support this.</li><li>Firefox 97 does not.</li></ul></li></ul><h2 id=compatibility>Compatibility</h2><p>Also (as I have written a long time ago in <a href=https://techlab.bol.com/making-sense-user-agent-string/>this article</a>) the UserAgents set values to show to websites what they are compatible with.</p><p>In 2021 several browsers stopped updating the version number of the underlying operating system because of compatibility problems with poorly written websites.</p><p>Also several browsers are reaching version 100 which makes the version 3 digits; which leads to parsing problems if a website expects a 2 digit version.</p><p>This has led to some testing flags for website builders like
<a href=chrome://flags/#force-major-version-to-100>chrome://flags/#force-major-version-to-100</a></p><blockquote><p><strong>Force major version to 100 in User-Agent</strong></p></blockquote><blockquote><p>Force the Chrome major version in the User-Agent string to 100, which allows testing the 3-digit major version number before the actual M100 release. This flag is only available from M96-M99. – Mac, Windows, Linux, Chrome OS, Android, Fuchsia</p></blockquote><p>and also <a href=chrome://flags/#force-minor-version-to-100>chrome://flags/#force-minor-version-to-100</a></p><blockquote><p><strong>Force the minor version to 100 in the User-Agent string</strong></p></blockquote><blockquote><p>Force the Chrome minor version in the User-Agent string to 100, which allows testing a 3-digit minor version number. Currently, the minor version is always reported as 0, but due to potential breakage with the upcoming major version 100, this flag allows us to test whether setting the major version in the minor version part of the User-Agent string would be an acceptable alternative. If force-major-version-to-100 is set, then this flag has no effect. See crbug.com/1278459 for details. – Mac, Windows, Linux, Chrome OS, Android, Fuchsia</p></blockquote><p><strong>Hold on</strong>: They are testing if they can set the major version in the minor version position &mldr; to work around broken websites?</p><p>In Chrome/Edge 99 has actually implemented this flag:</p><p><a href=chrome://flags/#force-major-version-to-minor>chrome://flags/#force-major-version-to-minor</a></p><blockquote><p><strong>Put major version in minor version position in User-Agent</strong></p></blockquote><blockquote><p>Lock the Microsoft Edge major version in the User-Agent string to 99, and force the major version number to the minor version position. This flag is a backup plan for unexpected site-compatibility breakage with a three digit major version. – Mac, Windows, Linux, Chrome OS, Android, Fuchsia</p></blockquote><p>So you get the effect:</p><ul><li>Chrome/99.0.1150.25 = Chrome 99</li><li>Chrome/99.123.1150.25 = Chrome 123</li></ul><p>Don&rsquo;t worry: Yauaa actually detects and handles this and reports the correct version.</p><h3 id=there-is-no-macos-11>There is no MacOS 11</h3><p>Both Chromium (=Chrome, Edge, &mldr;) and Firefox have frozen the version of MacOS X to 10.15(.7) and as a consequence MacOS 11 &mldr; simply does not appear in any of their UserAgents.
As a consequence these specific versions are reported as unknown version (<code>??</code>).</p><p>Back ground information:</p><ul><li>Always <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1175225">10_15_7</a> since Chrome 90.</li><li>Always <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox#macintosh>10.15</a> since Firefox 87.</li></ul><h3 id=there-is-no-windows-11-in-chromiumchromeedge>There is no Windows 11 in Chromium/Chrome/Edge/&mldr;</h3><p>Microsoft has documented here <a href=https://docs.microsoft.com/en-us/microsoft-edge/web-platform/how-to-detect-win11>https://docs.microsoft.com/en-us/microsoft-edge/web-platform/how-to-detect-win11</a></p><blockquote><p>There are two approaches for sites to access user agent information:</p><ul><li>User-Agent strings (legacy).</li><li>User-Agent Client Hints (recommended).</li></ul><p>Websites can differentiate between users on Windows 11 and Windows 10 by using User-Agent Client Hints (UA-CH).`</p></blockquote><p>and</p><blockquote><p>User-Agent strings won&rsquo;t be updated to differentiate between Windows 11 and Windows 10. We don&rsquo;t recommend using User-Agent strings to retrieve user agent data. Browsers that don&rsquo;t support User-Agent Client Hints won&rsquo;t be able to differentiate between Windows 11 and Windows 10.</p></blockquote><p>And thus the Chrome UserAgent on Windows 11 looks like this:</p><blockquote><p>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36</p></blockquote><p>Which clealy says: <code>Windows 10.0</code></p><h3 id=there-is-no-windows-11-in-firefox>There is no Windows 11 in Firefox</h3><p>Firefox has an explicit issue called <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1693295">Cap the Windows version in the User-Agent to 10.0.</a>.</p><p>Their <a href=https://hg.mozilla.org/mozilla-central/rev/3b60746765d3>code comment</a> clearly describes why</p><blockquote><p>Cap the reported Windows version to 10.0. This way, Microsoft doesn&rsquo;t
get to change Web compat-sensitive values without our veto. The
compat-sensitivity keeps going up as 10.0 stays as the current value
for longer and longer. If the system-reported version ever changes,
we&rsquo;ll be able to take our time to evaluate the Web compat impact
instead of having to scamble to react like happened with macOS
changing from 10.x to 11.x.</p></blockquote><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1652013445></script>
<script src=/js/perfect-scrollbar.min.js?1652013445></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1652013445></script>
<script src=/js/jquery.sticky.js?1652013445></script>
<script src=/js/featherlight.min.js?1652013445></script>
<script src=/js/highlight.pack.js?1652013445></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1652013445></script>
<script src=/js/learn.js?1652013445></script>
<script src=/js/hugo-learn.js?1652013445></script></body></html>